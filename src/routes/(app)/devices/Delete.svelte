<script lang="ts">
    import { Button, Modal } from 'flowbite-svelte';
    import { ExclamationCircleOutline } from 'flowbite-svelte-icons';
    import {createEventDispatcher} from "svelte";
    export let open: boolean = false; // modal control
    const dispatch = createEventDispatcher();
    async function deleteDevice(data) {
        let id = data.id
        const url = `/api/devices/${id}`;
        const response = await fetch(url, {method: 'DELETE'});
        if (response.ok) {
            dispatch('deleteDevice', data); // Dispatch event to parent
            open=false
        } else {
            throw Error(await response.text());
        }
    }
</script>

<Modal bind:open size="sm">
    <ExclamationCircleOutline class="mx-auto mb-4 mt-8 h-10 w-10 text-red-600" />

    <h3 class="mb-6 text-center text-lg text-gray-500 dark:text-gray-400">
        Are you sure you want to delete this device?
    </h3>

    <div class="flex items-center justify-center">
        <Button color="red" class="mr-2" on:click={deleteDevice}>Yes, I'm sure</Button>
        <Button color="alternative" on:click={() => (open = false)}>No, cancel</Button>
    </div>
</Modal>
